
  # Ad Server Service (we'll build this)
  ad-server:
    build:
      context: .
      dockerfile: src/AdServer/Dockerfile
    container_name: ads_server
    ports:
      - "8080:8080"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
      kafka:
        condition: service_healthy
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ConnectionStrings__DefaultConnection: "Server=postgres;Port=5432;Database=ads_db;User Id=postgres;Password=postgres;"
      Redis__ConnectionString: "redis:6379"
      Kafka__BootstrapServers: "kafka:9092"
      ASPNETCORE_URLS: "http://+:8080"








  # Event Consumer Service (we'll build this)
  event-consumer:
    build:
      context: .
      dockerfile: src/EventConsumer/Dockerfile
    container_name: ads_event_consumer
    depends_on:
      postgres:
        condition: service_healthy
      kafka:
        condition: service_healthy
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ConnectionStrings__DefaultConnection: "Server=postgres;Port=5432;Database=ads_db;User Id=postgres;Password=postgres;"
      Kafka__BootstrapServers: "kafka:9092"

  # Analytics Service (we'll build this)
  analytics-service:
    build:
      context: .
      dockerfile: src/AnalyticsService/Dockerfile
    container_name: ads_analytics
    ports:
      - "8082:8082"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ConnectionStrings__DefaultConnection: "Server=postgres;Port=5432;Database=ads_db;User Id=postgres;Password=postgres;"
      Redis__ConnectionString: "redis:6379"
      ASPNETCORE_URLS: "http://+:8082"